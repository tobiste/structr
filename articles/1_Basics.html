<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>1. Basics • structr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="1. Basics">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">structr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/1_Basics.html">1. Basics</a></li>
    <li><a class="dropdown-item" href="../articles/2_Stereographic_projection.html">2. Stereographic projections</a></li>
    <li><a class="dropdown-item" href="../articles/3_Stereographic_projection_ggplot.html">3. Stereographic projections with ggplot</a></li>
    <li><a class="dropdown-item" href="../articles/4_Faults.html">4. Faults</a></li>
    <li><a class="dropdown-item" href="../articles/5_Mohr_Circle.html">5. Mohr Circle</a></li>
    <li><a class="dropdown-item" href="../articles/6_Oriented_Drill_Cores.html">6. Oriented drill cores</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tobiste/structr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>1. Basics</h1>
                        <h4 data-toc-skip class="author">Tobias
Stephan</h4>
            
            <h4 data-toc-skip class="date">2025-07-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/tobiste/structr/blob/main/vignettes/1_Basics.Rmd" class="external-link"><code>vignettes/1_Basics.Rmd</code></a></small>
      <div class="d-none name"><code>1_Basics.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tobiste.github.io/structr/">structr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="import">Import<a class="anchor" aria-label="anchor" href="#import"></a>
</h2>
<p>From a Strabospot project, download the json file and import it using
the <code><a href="../reference/strabo.html">read_strabo_JSON()</a></code> function.</p>
<p>This returns a list which contains all the information and metadata
(including coordinates, descriptions etc) extracted from the Strabospot
project in the list element <code>data</code>, the tags used for the
project in the list element <code>tags</code>, and the linear and planar
orientation measurements in the list elements <code>lines</code> and
<code>planes</code>, respectively.</p>
</div>
<div class="section level2">
<h2 id="data-conversion-to-spherical-objects">Data conversion to spherical objects<a class="anchor" aria-label="anchor" href="#data-conversion-to-spherical-objects"></a>
</h2>
<p>Usually orientation data is stored in a table containing the column
dip direction (or strike) and the dip angle of a measured plane…</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_planes</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_planes</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   dipdir   dip quality feature_type</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>    142    52       3 foliation   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>    135    43       3 foliation   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>    148    42       3 foliation   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>    150    46       3 foliation   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>    139    51       3 foliation   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>    158    51       3 foliation</span></span></code></pre></div>
<p>or the trend (azimuth) and plunge (inclination) of a measured
line…</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_lines</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_lines</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   trend plunge quality feature_type</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>    54     13       3 stretching  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>    61     15       3 stretching  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>    74     14      <span style="color: #BB0000;">NA</span> stretching  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>    80     19      <span style="color: #BB0000;">NA</span> stretching  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>    63     17      <span style="color: #BB0000;">NA</span> stretching  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>    76     10      <span style="color: #BB0000;">NA</span> stretching</span></span></code></pre></div>
<p>To convert these data frames to spherical objects, use the
<code><a href="../reference/classes.html">Plane()</a></code> and <code><a href="../reference/classes.html">Line()</a></code> functions from the
<code>structr</code> package. These functions take the dip direction and
dip angle for planes, and the trend and plunge for lines as
arguments.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_planes</span><span class="op">)</span></span>
<span><span class="va">planes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classes.html">Plane</a></span><span class="op">(</span><span class="va">example_planes</span><span class="op">$</span><span class="va">dipdir</span>, <span class="va">example_planes</span><span class="op">$</span><span class="va">dip</span><span class="op">)</span></span>
<span><span class="va">lines</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classes.html">Line</a></span><span class="op">(</span><span class="va">example_lines</span><span class="op">$</span><span class="va">trend</span>, <span class="va">example_lines</span><span class="op">$</span><span class="va">plunge</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>If the raw data was imported using <code><a href="../reference/strabo.html">read_strabo_JSON()</a></code>
this step is not necessary as the data will come already in the correct
format.</p>
</blockquote>
<p>The spherical objects can be easily converted into Cartesian
coordinate vectors using the functions <code><a href="../reference/coordinates.html">line2vec()</a></code> or
<code><a href="../reference/coordinates.html">plane2vec()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lines_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/coordinates.html">line2vec</a></span><span class="op">(</span><span class="va">lines</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">lines_vector</span><span class="op">)</span></span>
<span><span class="co">#&gt;              x         y         z</span></span>
<span><span class="co">#&gt; [1,] 0.5727204 0.7882819 0.2249511</span></span>
<span><span class="co">#&gt; [2,] 0.4682901 0.8448178 0.2588190</span></span>
<span><span class="co">#&gt; [3,] 0.2674497 0.9327081 0.2419219</span></span>
<span><span class="co">#&gt; [4,] 0.1641876 0.9311540 0.3255682</span></span>
<span><span class="co">#&gt; [5,] 0.4341533 0.8520738 0.2923717</span></span>
<span><span class="co">#&gt; [6,] 0.2382466 0.9555548 0.1736482</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">planes_as_line</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/coordinates.html">plane2vec</a></span><span class="op">(</span><span class="va">planes</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">planes_as_line</span><span class="op">)</span></span>
<span><span class="co">#&gt;              x          y         z</span></span>
<span><span class="co">#&gt; [1,] 0.6209609 -0.4851479 0.6156615</span></span>
<span><span class="co">#&gt; [2,] 0.4822457 -0.4822457 0.7313537</span></span>
<span><span class="co">#&gt; [3,] 0.5674549 -0.3545852 0.7431448</span></span>
<span><span class="co">#&gt; [4,] 0.6229665 -0.3596699 0.6946584</span></span>
<span><span class="co">#&gt; [5,] 0.5865195 -0.5098536 0.6293204</span></span>
<span><span class="co">#&gt; [6,] 0.7205572 -0.2911240 0.6293204</span></span></code></pre></div>
<p>which produces the same output as</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/coordinates.html">line2vec</a></span><span class="op">(</span><span class="va">planes_as_line</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;              x           y            z</span></span>
<span><span class="co">#&gt; [1,] 0.9999054 0.010837212 -0.008467326</span></span>
<span><span class="co">#&gt; [2,] 0.9999292 0.008416377 -0.008416675</span></span>
<span><span class="co">#&gt; [3,] 0.9999318 0.009903605 -0.006188640</span></span>
<span><span class="co">#&gt; [4,] 0.9999212 0.010872389 -0.006277383</span></span>
<span><span class="co">#&gt; [5,] 0.9999080 0.010236112 -0.008898507</span></span>
<span><span class="co">#&gt; [6,] 0.9999080 0.012575602 -0.005081050</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="some-helpers">Some helpers<a class="anchor" aria-label="anchor" href="#some-helpers"></a>
</h2>
<p>Converts strike into dip direction using right-hand rule</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rhr.html">rhr2dd</a></span><span class="op">(</span><span class="fl">271</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="fu"><a href="../reference/rhr.html">dd2rhr</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 271</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># parse_strike_dip(c("E30N", "W10S"), c("45NW", "4SE"))</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="vector-operations">Vector operations<a class="anchor" aria-label="anchor" href="#vector-operations"></a>
</h2>
<p>Since the spherical or vector objects are easily convertible, they
can be used for all sort of vector operations, such as the magnitude (or
length), the angle between vectors, dot product, cross product,
projection and rotation.</p>
<p>Define some example vectors:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">line1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classes.html">Line</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">line2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classes.html">Line</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">30</span><span class="op">)</span></span></code></pre></div>
<p>The <strong>vector length</strong> (or magnitude):</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/operations.html">vlength</a></span><span class="op">(</span><span class="va">line1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<blockquote>
<p>Orientation vectors are by definition unit vectors, i.e. their length
is equal to 1.</p>
</blockquote>
<p>The <strong>angle</strong> between two vectors</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/operations.html">vangle</a></span><span class="op">(</span><span class="va">line1</span>, <span class="va">line2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 78.89371</span></span></code></pre></div>
<p>The <strong>dot product</strong> (or scalar product) of two
vectors</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/operations.html">vdot</a></span><span class="op">(</span><span class="va">line1</span>, <span class="va">line2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.1926297</span></span></code></pre></div>
<p>Intuitively, it tells us something about how much two vectors point
in the same direction.</p>
<p>The <strong>cross product</strong> of two vectors:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/operations.html">vcross</a></span><span class="op">(</span><span class="va">line1</span>, <span class="va">line2</span><span class="op">)</span></span>
<span><span class="co">#&gt;       azimuth   plunge</span></span>
<span><span class="co">#&gt; [1,] 258.6679 32.21399</span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "line"</span></span></code></pre></div>
<p>This gives the vector that is perpendicular to the plane spanned by
the two vectors.</p>
<p>The <strong>projection</strong> of a vector on another vector:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/operations.html">vproject</a></span><span class="op">(</span><span class="va">line1</span>, <span class="va">line2</span><span class="op">)</span></span>
<span><span class="co">#&gt;      azimuth plunge</span></span>
<span><span class="co">#&gt; [1,]      10     30</span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "line"</span></span></code></pre></div>
<blockquote>
<p>Because of vectors a unit vectors, the projected vector is equal to
the second vector.</p>
</blockquote>
<p>The <strong>rotation</strong> of a vector about another vector
(rotation axis) by a specified rotation angle:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/operations.html">vrotate</a></span><span class="op">(</span><span class="va">line1</span>, rotaxis <span class="op">=</span> <span class="va">line2</span>, rotangle <span class="op">=</span> <span class="fl">45</span><span class="op">)</span></span>
<span><span class="co">#&gt;       azimuth   plunge</span></span>
<span><span class="co">#&gt; [1,] 210.5039 70.01332</span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "line"</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tobias Stephan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
