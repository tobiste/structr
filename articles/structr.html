<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>structr • structr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="structr">
<meta name="description" content="Start here if this is your first time using structr.
">
<meta property="og:description" content="Start here if this is your first time using structr.
">
<meta property="og:image" content="https://tobiste.github.io/structr/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">structr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2.9005</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/structr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Basics and Import</h6></li>
    <li><a class="dropdown-item" href="../articles/Import.html">Import Data</a></li>
    <li><a class="dropdown-item" href="../articles/Data_types.html">Data types</a></li>
    <li><a class="dropdown-item" href="../articles/Basics.html">Vector Algebra</a></li>
    <li><a class="dropdown-item" href="../articles/Oriented_Drill_Cores.html">Oriented Drill Cores</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Plotting</h6></li>
    <li><a class="dropdown-item" href="../articles/Plots.html">Orientation Plots</a></li>
    <li><a class="dropdown-item" href="../articles/Plots_ggplot.html">Orientation Plots with ggplot</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Statistics</h6></li>
    <li><a class="dropdown-item" href="../articles/Statistics.html">Statistics on the Sphere</a></li>
    <li><a class="dropdown-item" href="../articles/Regression.html">Regression on the Sphere</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Faults and Stress</h6></li>
    <li><a class="dropdown-item" href="../articles/Faults.html">Faults and Paleostress</a></li>
    <li><a class="dropdown-item" href="../articles/Mohr_Circle.html">Mohr Circle</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/Strain_Analysis.html">Strain and Vorticity Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/deformation.html">Deformation and Velocity Gradient Tensor</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tobiste/structr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>structr</h1>
                        <h4 data-toc-skip class="author">Tobias
Stephan</h4>
            
            <h4 data-toc-skip class="date">2025-11-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/tobiste/structr/blob/main/vignettes/structr.Rmd" class="external-link"><code>vignettes/structr.Rmd</code></a></small>
      <div class="d-none name"><code>structr.Rmd</code></div>
    </div>

    
    
<p>When working with orientation data you must:</p>
<ul>
<li>Define the type of orientation data you have measured</li>
<li>Figure out what you want to do</li>
<li>Describe the orientation data</li>
<li>Visualize your findings</li>
</ul>
<div class="section level2">
<h2 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h2>
<p>Before you start you need to have R and and R-compatible IDE
installed on your computer:</p>
<ol style="list-style-type: decimal">
<li><p>You will need R installed on your computer. You can download R
from the CRAN website: <a href="https://cran.r-project.org/" class="external-link uri">https://cran.r-project.org/</a></p></li>
<li><p>Once you downloaded and successfully installed R, you can use R
in your preferred IDE. I recommend installing and using <a href="https://posit.co/download/rstudio-desktop/" class="external-link">RStudio</a>. However,
<a href="https://positron.posit.co/" class="external-link">Positron</a> and <a href="https://visualstudio.microsoft.com/" class="external-link">VisualStudio</a> are also
great alternatives. You are also allowed to use R’s native GUI or use R
in your terminal only.</p></li>
<li><p>Open your IDE and now you can install the {structr} package by
typing into the commando console the following code. This will install
the package and every required library as well.</p></li>
<li><p>Next you must “load” the library to use the functions of
{structr}:</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tobiste.github.io/structr/">structr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="import">Import<a class="anchor" aria-label="anchor" href="#import"></a>
</h2>
<p>The first thing you usually need to do is importing your orientation
data. This can be done in several different ways depending on your
preferences. For example, RStudio has a GUI that allows to import data
without using R commandos (File &gt; Import Datasets).</p>
<p>You can also use one of the below functions to import data:</p>
<p>To use your data directly from a Strabospot project, download the
json file and import it using the <code><a href="../reference/strabo.html">read_strabo_JSON()</a></code>
function.</p>
<p>This returns a list which contains all the information and metadata
(including coordinates, descriptions etc) extracted from the
<em>StraboSpot</em> project in the list element <code>data</code>, the
tags used for the project in the list element <code>tags</code>, and the
linear and planar orientation measurements in the list elements
<code>lines</code> and <code>planes</code>, respectively.</p>
</div>
<div class="section level2">
<h2 id="data-type-declaration">Data type declaration<a class="anchor" aria-label="anchor" href="#data-type-declaration"></a>
</h2>
<p>Depending on the symmetry of the orientation data, different data
types are used to represent orientations in 3D space. The main data
types used in structural geology are Rays, Lines, Planes, Pairs, and
Faults. Distinguishing these data types is important each the different
symmetries imply different statistical assumption for their
distribution. In other words the different data types require different
statistical “treatments”. To learn more about it, follow this <a href="https://tobiste.github.io/structr/articles/Data_types.html">tutorial</a>.</p>
<p>The data types can be generated using the object creator functions:
<code><a href="../reference/classes.html">Vec3()</a></code>, <code><a href="../reference/classes.html">Line()</a></code>, <code><a href="../reference/classes.html">Plane()</a></code>,
<code><a href="../reference/classes.html">Ray()</a></code>, <code><a href="../reference/classes.html">Pair()</a></code>, and <code><a href="../reference/classes.html">Fault()</a></code>. These
functions create spherical object, and {structr} will identify the
symmetry nature of the data in further function calls.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plunge_direction</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">54</span>, <span class="fl">61</span>, <span class="fl">74</span>, <span class="fl">80</span>, <span class="fl">63</span><span class="op">)</span></span>
<span><span class="va">plunge</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">15</span>, <span class="fl">14</span>, <span class="fl">19</span>, <span class="fl">17</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lines</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classes.html">Line</a></span><span class="op">(</span><span class="va">plunge_direction</span>, <span class="va">plunge</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">lines</span><span class="op">)</span></span>
<span><span class="co">#&gt; Line object (n = 5):</span></span>
<span><span class="co">#&gt;      azimuth plunge</span></span>
<span><span class="co">#&gt; [1,]      54     13</span></span>
<span><span class="co">#&gt; [2,]      61     15</span></span>
<span><span class="co">#&gt; [3,]      74     14</span></span>
<span><span class="co">#&gt; [4,]      80     19</span></span>
<span><span class="co">#&gt; [5,]      63     17</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="equal-area-projections">Equal-area projections<a class="anchor" aria-label="anchor" href="#equal-area-projections"></a>
</h2>
<p>The spherical objects can be plotted in equal-area projections using
R’s primitive plotting functions, e.g. <code>plot</code>,
<code><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points()</a></code>, and <code><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines()</a></code>, ….</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#  import some example lines</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_lines</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot lines in a equal-area projection</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">example_lines</span><span class="op">)</span></span></code></pre></div>
<p><img src="structr_files/figure-html/plot-1.png" class="r-plt" width="700"></p>
<p>More details on plotting spherical data in <a href="https://tobiste.github.io/structr/articles/Plots.html" class="uri">https://tobiste.github.io/structr/articles/Plots.html</a></p>
</div>
<div class="section level2">
<h2 id="statistical-estimators">Statistical estimators<a class="anchor" aria-label="anchor" href="#statistical-estimators"></a>
</h2>
<p>There are plenty of different statistical parameters, which
meaningfulness depend on the underlying distribution of the orientation
data (and hence also on the symmetry of the data).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Spherical arithmetic mean</span></span>
<span><span class="va">lines_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stats.html">sph_mean</a></span><span class="op">(</span><span class="va">example_lines</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">lines_mean</span><span class="op">)</span></span>
<span><span class="co">#&gt; Line object (n = 1):</span></span>
<span><span class="co">#&gt;  azimuth   plunge </span></span>
<span><span class="co">#&gt; 68.51277 20.49587</span></span>
<span></span>
<span><span class="co"># Spherical arithmetic variance</span></span>
<span><span class="fu"><a href="../reference/stats.html">sph_mean</a></span><span class="op">(</span><span class="va">example_lines</span><span class="op">)</span></span>
<span><span class="co">#&gt; Line object (n = 1):</span></span>
<span><span class="co">#&gt;  azimuth   plunge </span></span>
<span><span class="co">#&gt; 68.51277 20.49587</span></span>
<span></span>
<span><span class="co"># Spherical standard deviation</span></span>
<span><span class="va">lines_sd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stats.html">sph_sd</a></span><span class="op">(</span><span class="va">example_lines</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">lines_sd</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 40.06063</span></span></code></pre></div>
<p>Here, the spherical arithmetic mean and variance are computed. These
values conveniently describe the distribution if we assume a von
Mises-Fisher distribution of the data, which is the normal distribution
analogue for line-like data. In many cases the geodesic mean and
variance better describe the distribution of vectors. More details in
the <a href="https://tobiste.github.io/structr/articles/Statistics.html">statistics
tutorial</a>.</p>
</div>
<div class="section level2">
<h2 id="orientation-tensor">Orientation tensor<a class="anchor" aria-label="anchor" href="#orientation-tensor"></a>
</h2>
<p>The orientation tensor describes the distribution of all vectors in
your dataset.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ortensor.html">ortensor</a></span><span class="op">(</span><span class="va">example_lines</span><span class="op">)</span></span>
<span><span class="co">#&gt; Orientation tensor</span></span>
<span><span class="co">#&gt;            [,1]      [,2]       [,3]</span></span>
<span><span class="co">#&gt; [1,] 0.16204564 0.2552464 0.08096582</span></span>
<span><span class="co">#&gt; [2,] 0.25524643 0.7382838 0.19306540</span></span>
<span><span class="co">#&gt; [3,] 0.08096582 0.1930654 0.09967054</span></span></code></pre></div>
<p>Eigenvalues and eigenvectors of this tensor describe the
distribution.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lines_eigen</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ot_eigen.html">ot_eigen</a></span><span class="op">(</span><span class="va">example_lines</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">lines_eigen</span><span class="op">)</span></span>
<span><span class="co">#&gt; eigen() decomposition</span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 0.89044880 0.06736731 0.04218389</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $vectors</span></span>
<span><span class="co">#&gt; Line object (n = 3):</span></span>
<span><span class="co">#&gt;        azimuth   plunge</span></span>
<span><span class="co">#&gt; [1,]  69.09796 14.82125</span></span>
<span><span class="co">#&gt; [2,] 334.66510 16.28283</span></span>
<span><span class="co">#&gt; [3,] 199.26521 67.69500</span></span></code></pre></div>
<p>Summarize the statistical parameters in a equal-area projection:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">example_lines</span>, col <span class="op">=</span> <span class="st">"grey30"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># greatcircles associated with the eigenvectors</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">lines_eigen</span><span class="op">$</span><span class="va">vectors</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#000004FF"</span>, <span class="st">"#B63679FF"</span>, <span class="st">"#FE9F6DFF"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># spherical mean and standard deviation cone</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">lines_mean</span>, pch <span class="op">=</span> <span class="fl">16</span>, cex <span class="op">=</span> <span class="fl">1.5</span>, col <span class="op">=</span> <span class="st">"#35B779FF"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">lines_mean</span>, ang <span class="op">=</span> <span class="va">lines_sd</span>, col <span class="op">=</span> <span class="st">"#35B779FF"</span><span class="op">)</span></span></code></pre></div>
<p><img src="structr_files/figure-html/plot2-1.png" class="r-plt" width="700"></p>
<p>Here, the eigenvector are the intersection of the great-circles. Note
how the spherical mean is quite similar to one eigenvector (the one
associated with the greatest eigenvalue).</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://tobiste.github.io/" class="external-link">Tobias Stephan</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
